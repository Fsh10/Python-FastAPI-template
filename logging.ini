[loggers]
keys=root,uvicorn,uvicorn.access,uvicorn.error,FastAPI Template

[handlers]
keys=console,loki,file

[formatters]
keys=standard

[logger_root]
level=DEBUG
handlers=console,loki,file
formatter=standard

[logger_FastAPI Template]
level=DEBUG
handlers=console,loki,file
formatter=standard
qualname=FastAPI Template
propagate=0

[logger_uvicorn]
propagate=0
handlers=console,loki
formatter=standard
qualname=uvicorn
level=WARNING

[logger_uvicorn.access]
propagate=0
handlers=console,loki
formatter=standard
qualname=uvicorn.access
level=WARNING

[logger_uvicorn.error]
propagate=0
handlers=console,loki
formatter=standard
qualname=uvicorn.error
level=WARNING

[handler_console]
class=logging.StreamHandler
level=WARNING
formatter=standard
stream=ext://sys.stderr

[handler_loki]
class=logging_loki.LokiHandler
level=WARNING
formatter=standard
args=(settings.LOKI_URL,)
kwargs={'tags': {'application': 'api', 'environment': settings.MODE, 'component': 'uvicorn'}, 'version': '1'}

[handler_file]
class=logging.handlers.RotatingFileHandler
level=DEBUG
formatter=standard
args=('logs/app.log', 'a', 10485760, 5)

[formatter_standard]
format=[%(asctime)s] [%(levelname)s] [%(name)s] [%(request_id)s] [%(path)s] [%(method)s] [%(status_code)s] %(message)s
datefmt=%Y-%m-%dT%H:%M:%S